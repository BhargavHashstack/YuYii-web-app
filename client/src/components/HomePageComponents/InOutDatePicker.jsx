import { useState, useRef } from "react";
import DatePicker from "react-datepicker";
import "react-datepicker/dist/react-datepicker.css";
import './InOutDatePicker.css';

function MyDatePicker() {
  const today = new Date();
  const tomorrow = new Date(today);
  tomorrow.setDate(tomorrow.getDate() + 1);

  const [startDate, setStartDate] = useState(today);
  const [endDate, setEndDate] = useState(tomorrow);

  const startDateRef = useRef(null);
  const endDateRef = useRef(null);

  const handleStartDateChange = (date) => {
    setStartDate(date);
    if (date > endDate) {
      setEndDate(date);
    }
  };

  const handleEndDateChange = (date) => {
    setEndDate(date);
    if (date < startDate) {
      setStartDate(date);
    }
  };
  
  

  const formatDate = (date) => {
    const day = date.getDate();
    const month = date.toLocaleString('default', { month: 'short' });
    const year = date.getFullYear();

    return (
      <span className="custom-date-home">
        <span className="custom-day-home">{day}</span>
        <span className="custom-month-home">{month}</span>
        <span className="custom-year-home">{year}</span>
      </span>
    );
  };

  return (
    <div className="bg-[#FFFFFF]">
      <h4 className="text-[#828282] text-sm font-semibold font-poppins lg:mb-2 sm:mb-0">Travel Dates</h4>
      <div className="flex flex-col xl:gap-4 lg:gap-3 md:gap-24 sm:gap-10 sm:flex-row sm:justify-center items-center sm:mt-2">
        {/* Start Date */}
        <div className="flex flex-col items-center px-2">
          <div
            className="flex items-center cursor-pointer"
            onClick={() => startDateRef.current?.setFocus()}
          >
            


<DatePicker
              ref={startDateRef} // Attach the ref
              selected={startDate}
              onChange={handleStartDateChange}
              customInput={<div className=" flex items-center gap-1 cursor-pointer">
                <svg
            
          
            width="21" height="20" viewBox="0 0 21 29" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.96163 29.003C2.20387 29.003 1.5625 28.7405 1.0375 28.2155C0.5125 27.6905 0.25 27.0491 0.25 26.2913V6.21458C0.25 5.45683 0.5125 4.81545 1.0375 4.29045C1.5625 3.76545 2.20387 3.50295 2.96163 3.50295H5.03837V0.330078H7.34613V3.50295H18.7116V0.330078H20.9616V3.50295H23.0384C23.7961 3.50295 24.4375 3.76545 24.9625 4.29045C25.4875 4.81545 25.75 5.45683 25.75 6.21458V26.2913C25.75 27.0491 25.4875 27.6905 24.9625 28.2155C24.4375 28.7405 23.7961 29.003 23.0384 29.003H2.96163ZM2.96163 26.753H23.0384C23.1539 26.753 23.2596 26.7048 23.3556 26.6086C23.4519 26.5126 23.5 26.4068 23.5 26.2913V12.2146H2.5V26.2913C2.5 26.4068 2.54813 26.5126 2.64438 26.6086C2.74038 26.7048 2.84612 26.753 2.96163 26.753ZM2.5 9.96458H23.5V6.21458C23.5 6.09908 23.4519 5.99333 23.3556 5.89733C23.2596 5.80108 23.1539 5.75295 23.0384 5.75295H2.96163C2.84612 5.75295 2.74038 5.80108 2.64438 5.89733C2.54813 5.99333 2.5 6.09908 2.5 6.21458V9.96458ZM13 17.8685C12.6327 17.8685 12.3197 17.7391 12.061 17.4803C11.8025 17.2218 11.6733 16.9088 11.6733 16.5413C11.6733 16.1741 11.8025 15.8611 12.061 15.6023C12.3197 15.3438 12.6327 15.2146 13 15.2146C13.3673 15.2146 13.6803 15.3438 13.939 15.6023C14.1975 15.8611 14.3268 16.1741 14.3268 16.5413C14.3268 16.9088 14.1975 17.2218 13.939 17.4803C13.6803 17.7391 13.3673 17.8685 13 17.8685ZM7 17.8685C6.63275 17.8685 6.31975 17.7391 6.061 17.4803C5.8025 17.2218 5.67325 16.9088 5.67325 16.5413C5.67325 16.1741 5.8025 15.8611 6.061 15.6023C6.31975 15.3438 6.63275 15.2146 7 15.2146C7.36725 15.2146 7.68025 15.3438 7.939 15.6023C8.1975 15.8611 8.32675 16.1741 8.32675 16.5413C8.32675 16.9088 8.1975 17.2218 7.939 17.4803C7.68025 17.7391 7.36725 17.8685 7 17.8685ZM19 17.8685C18.6327 17.8685 18.3198 17.7391 18.061 17.4803C17.8025 17.2218 17.6733 16.9088 17.6733 16.5413C17.6733 16.1741 17.8025 15.8611 18.061 15.6023C18.3198 15.3438 18.6327 15.2146 19 15.2146C19.3673 15.2146 19.6802 15.3438 19.939 15.6023C20.1975 15.8611 20.3268 16.1741 20.3268 16.5413C20.3268 16.9088 20.1975 17.2218 19.939 17.4803C19.6802 17.7391 19.3673 17.8685 19 17.8685ZM13 23.753C12.6327 23.753 12.3197 23.6236 12.061 23.3648C11.8025 23.1063 11.6733 22.7935 11.6733 22.4262C11.6733 22.0587 11.8025 21.7457 12.061 21.4872C12.3197 21.2285 12.6327 21.0991 13 21.0991C13.3673 21.0991 13.6803 21.2285 13.939 21.4872C14.1975 21.7457 14.3268 22.0587 14.3268 22.4262C14.3268 22.7935 14.1975 23.1063 13.939 23.3648C13.6803 23.6236 13.3673 23.753 13 23.753ZM7 23.753C6.63275 23.753 6.31975 23.6236 6.061 23.3648C5.8025 23.1063 5.67325 22.7935 5.67325 22.4262C5.67325 22.0587 5.8025 21.7457 6.061 21.4872C6.31975 21.2285 6.63275 21.0991 7 21.0991C7.36725 21.0991 7.68025 21.2285 7.939 21.4872C8.1975 21.7457 8.32675 22.0587 8.32675 22.4262C8.32675 22.7935 8.1975 23.1063 7.939 23.3648C7.68025 23.6236 7.36725 23.753 7 23.753ZM19 23.753C18.6327 23.753 18.3198 23.6236 18.061 23.3648C17.8025 23.1063 17.6733 22.7935 17.6733 22.4262C17.6733 22.0587 17.8025 21.7457 18.061 21.4872C18.3198 21.2285 18.6327 21.0991 19 21.0991C19.3673 21.0991 19.6802 21.2285 19.939 21.4872C20.1975 21.7457 20.3268 22.0587 20.3268 22.4262C20.3268 22.7935 20.1975 23.1063 19.939 23.3648C19.6802 23.6236 19.3673 23.753 19 23.753Z" fill="#DE1587"/>
</svg>
                
                {formatDate(startDate)}</div>}
              dateFormat="dd MMM yyyy"
              minDate={today}
            
            />
          </div>
          <p className="sm:self-start text-black text-xs md:text-sm sm:mt-2">Checkin</p>
        </div>

        {/* End Date */}
        <div className="flex flex-col items-center px-2">
          <div 
            className="flex items-center cursor-pointer" 
            onClick={() => endDateRef.current.setFocus()}
          >
            
<DatePicker
              ref={endDateRef} // Attach the ref
              selected={endDate}
              onChange={handleEndDateChange}
              customInput={<div className=" flex items-center gap-1 cursor-pointer">
              <svg width="21" height="20" viewBox="0 0 26 29" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.96163 29.003C2.20387 29.003 1.5625 28.7405 1.0375 28.2155C0.5125 27.6905 0.25 27.0491 0.25 26.2913V6.21458C0.25 5.45683 0.5125 4.81545 1.0375 4.29045C1.5625 3.76545 2.20387 3.50295 2.96163 3.50295H5.03837V0.330078H7.34613V3.50295H18.7116V0.330078H20.9616V3.50295H23.0384C23.7961 3.50295 24.4375 3.76545 24.9625 4.29045C25.4875 4.81545 25.75 5.45683 25.75 6.21458V26.2913C25.75 27.0491 25.4875 27.6905 24.9625 28.2155C24.4375 28.7405 23.7961 29.003 23.0384 29.003H2.96163ZM2.96163 26.753H23.0384C23.1539 26.753 23.2596 26.7048 23.3556 26.6086C23.4519 26.5126 23.5 26.4068 23.5 26.2913V12.2146H2.5V26.2913C2.5 26.4068 2.54813 26.5126 2.64438 26.6086C2.74038 26.7048 2.84612 26.753 2.96163 26.753ZM2.5 9.96458H23.5V6.21458C23.5 6.09908 23.4519 5.99333 23.3556 5.89733C23.2596 5.80108 23.1539 5.75295 23.0384 5.75295H2.96163C2.84612 5.75295 2.74038 5.80108 2.64438 5.89733C2.54813 5.99333 2.5 6.09908 2.5 6.21458V9.96458ZM13 17.8685C12.6327 17.8685 12.3197 17.7391 12.061 17.4803C11.8025 17.2218 11.6733 16.9088 11.6733 16.5413C11.6733 16.1741 11.8025 15.8611 12.061 15.6023C12.3197 15.3438 12.6327 15.2146 13 15.2146C13.3673 15.2146 13.6803 15.3438 13.939 15.6023C14.1975 15.8611 14.3268 16.1741 14.3268 16.5413C14.3268 16.9088 14.1975 17.2218 13.939 17.4803C13.6803 17.7391 13.3673 17.8685 13 17.8685ZM7 17.8685C6.63275 17.8685 6.31975 17.7391 6.061 17.4803C5.8025 17.2218 5.67325 16.9088 5.67325 16.5413C5.67325 16.1741 5.8025 15.8611 6.061 15.6023C6.31975 15.3438 6.63275 15.2146 7 15.2146C7.36725 15.2146 7.68025 15.3438 7.939 15.6023C8.1975 15.8611 8.32675 16.1741 8.32675 16.5413C8.32675 16.9088 8.1975 17.2218 7.939 17.4803C7.68025 17.7391 7.36725 17.8685 7 17.8685ZM19 17.8685C18.6327 17.8685 18.3198 17.7391 18.061 17.4803C17.8025 17.2218 17.6733 16.9088 17.6733 16.5413C17.6733 16.1741 17.8025 15.8611 18.061 15.6023C18.3198 15.3438 18.6327 15.2146 19 15.2146C19.3673 15.2146 19.6802 15.3438 19.939 15.6023C20.1975 15.8611 20.3268 16.1741 20.3268 16.5413C20.3268 16.9088 20.1975 17.2218 19.939 17.4803C19.6802 17.7391 19.3673 17.8685 19 17.8685ZM13 23.753C12.6327 23.753 12.3197 23.6236 12.061 23.3648C11.8025 23.1063 11.6733 22.7935 11.6733 22.4262C11.6733 22.0587 11.8025 21.7457 12.061 21.4872C12.3197 21.2285 12.6327 21.0991 13 21.0991C13.3673 21.0991 13.6803 21.2285 13.939 21.4872C14.1975 21.7457 14.3268 22.0587 14.3268 22.4262C14.3268 22.7935 14.1975 23.1063 13.939 23.3648C13.6803 23.6236 13.3673 23.753 13 23.753ZM7 23.753C6.63275 23.753 6.31975 23.6236 6.061 23.3648C5.8025 23.1063 5.67325 22.7935 5.67325 22.4262C5.67325 22.0587 5.8025 21.7457 6.061 21.4872C6.31975 21.2285 6.63275 21.0991 7 21.0991C7.36725 21.0991 7.68025 21.2285 7.939 21.4872C8.1975 21.7457 8.32675 22.0587 8.32675 22.4262C8.32675 22.7935 8.1975 23.1063 7.939 23.3648C7.68025 23.6236 7.36725 23.753 7 23.753ZM19 23.753C18.6327 23.753 18.3198 23.6236 18.061 23.3648C17.8025 23.1063 17.6733 22.7935 17.6733 22.4262C17.6733 22.0587 17.8025 21.7457 18.061 21.4872C18.3198 21.2285 18.6327 21.0991 19 21.0991C19.3673 21.0991 19.6802 21.2285 19.939 21.4872C20.1975 21.7457 20.3268 22.0587 20.3268 22.4262C20.3268 22.7935 20.1975 23.1063 19.939 23.3648C19.6802 23.6236 19.3673 23.753 19 23.753Z" fill="#DE1587"/>
</svg>  
                
                {formatDate(endDate)}</div>}
              dateFormat="dd MMM yyyy"
              minDate={startDate}
              className="custom-datepicker"
            />
          </div>
          <p className="sm:self-start text-black text-xs md:text-sm sm:mt-2">Checkout</p>
        </div>
      </div>
    </div>
  );
}

export default MyDatePicker;