import React from "react";
import Slider from "react-slick";
import "slick-carousel/slick/slick.css";
import "slick-carousel/slick/slick-theme.css";
import { Link } from "react-router-dom";
import HeadingSection from "../reusable_components/HeadingSection";
import Title from "../reusable_components/Title";
import S3Image from "../SelectedDestinationComponents/S3Image"; // Adjust path if needed

// Custom Arrow Components
const PrevArrow = ({ onClick }) => (
  <div
    className="absolute top-1/2 -left-10 transform -translate-y-1/2 w-12 h-12 flex items-center justify-center cursor-pointer z-10"
    onClick={onClick}
  >
    <svg width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.0851 0.484375H17.6622L18.3316 0.507459L19.2319 0.576711L20.1321 0.69213L20.9862 0.853717L21.5864 0.99222L22.3713 1.22306L23.2485 1.52315L24.0564 1.84632L24.7028 2.14641L25.0721 2.33109L25.6492 2.63118L26.4802 3.13902L26.8265 3.36986L27.1496 3.6007L27.5882 3.92387L27.9114 4.1778L28.2808 4.47789L28.5116 4.68564L28.7655 4.8934L29.0887 5.21657L29.2503 5.35507V5.40124L29.3426 5.44741V5.49358L29.4349 5.53974V5.58591L29.5273 5.63208L29.6889 5.81675L29.8966 6.02451L30.0582 6.20918L30.3352 6.53235L30.5891 6.83244L30.7969 7.10945L31.3971 7.94047L31.651 8.33289L32.0434 8.97924L32.4128 9.64868L32.6667 10.1565L32.9899 10.8952L33.313 11.7262L33.567 12.488L33.8209 13.4113L34.0056 14.3116L34.1441 15.1196L34.2364 15.9506L34.2826 16.5508V18.259L34.2133 19.2516L34.0979 20.1288L33.9132 21.0752L33.7285 21.86L33.5208 22.5756L33.29 23.2682L33.013 23.9607L32.6436 24.7917L32.2512 25.5766L31.928 26.1306L31.6741 26.5461L31.1662 27.3078L30.8661 27.7234L30.5661 28.0927L30.3583 28.3466L30.1044 28.6467L29.8505 28.9237L29.6889 29.1084L29.5965 29.2238H29.5504L29.5042 29.3161H29.458L29.4119 29.4085L29.1579 29.6624L28.9733 29.824L28.7886 30.0087L28.5347 30.2164L28.2808 30.4473L27.9576 30.7012L27.5421 31.0243L27.1035 31.3475L26.688 31.6245L26.134 31.9708L25.5338 32.317L24.9105 32.6402L24.4027 32.8941L23.6871 33.1942L22.6714 33.5636L21.8404 33.8175L21.194 33.9791L20.2476 34.1638L19.3011 34.3023L18.5394 34.3715L17.7776 34.4177H16.6696L15.677 34.3484L14.8459 34.2561L14.038 34.1176L13.0454 33.8867L12.399 33.7021L11.4757 33.402L10.6678 33.0788L9.90598 32.7326L9.46739 32.5017L9.09805 32.317L8.63637 32.04L8.10544 31.7169L7.7361 31.4629L6.85891 30.8166L6.60499 30.6088L6.28181 30.3318L5.7278 29.824L5.52005 29.6162L5.33537 29.4546L5.31229 29.3854H5.26612L5.10454 29.2007L4.8737 28.9699L4.71211 28.7852L4.36585 28.4159L4.1581 28.1619L3.92726 27.8849L3.581 27.4233L3.28091 27.0078L3.02699 26.6153L2.65764 26.0151L2.44989 25.6458L2.19597 25.1841L1.94204 24.6532L1.73429 24.1915L1.50345 23.6375L1.15719 22.668L0.972521 22.0447L0.764766 21.2368L0.626262 20.5904L0.487759 19.7363L0.395424 18.9746L0.349256 18.3051L0.326172 17.728V17.2202L0.37234 16.2507L0.464675 15.3735L0.603178 14.4963L0.764766 13.6884L0.995604 12.7881L1.27261 11.9109L1.61887 10.9875L1.89588 10.3643L2.38064 9.39475L2.58839 9.02541L2.8654 8.56373L3.09624 8.19439L3.30399 7.8943L3.55792 7.52496L3.83492 7.1787L4.11193 6.80936L4.2966 6.57852L4.57361 6.25535L4.85061 5.95525L5.0122 5.77058L5.28921 5.47049L5.5893 5.1704L5.77397 5.00882L6.14331 4.66256L6.39723 4.4548L6.69732 4.20088L6.95125 4.01621L7.43601 3.64687L7.7361 3.43911L8.08236 3.20827L8.40553 3.00052L8.75179 2.79276L9.23655 2.51576L9.76748 2.23875L10.5292 1.86941L11.3372 1.54623L11.845 1.36156L12.5145 1.15381L13.3916 0.922969L14.2919 0.738298L15.1691 0.599794L15.977 0.530543L17.0851 0.484375ZM14.3612 10.8029L14.1303 10.8721L13.9226 11.0106L13.5994 11.2876L13.1377 11.7493L12.7453 12.1187L8.19778 16.6662L8.03619 16.8508L7.82843 17.1279L7.7361 17.3356L7.71301 17.4972L7.80535 17.728L8.08236 18.0974L8.40553 18.4436L11.7065 21.7446L12.0066 22.0678H12.0528L12.0759 22.1371L12.1913 22.2525H12.2375L12.2836 22.3448L13.1146 23.1758L13.2993 23.3374L13.5763 23.6144L13.761 23.776L14.1072 24.0299L14.315 24.0992H14.5458L14.7998 23.9145L14.9844 23.7298L15.0999 23.5452L15.1229 23.3374L15.0306 23.1066L14.8921 22.8988L14.6843 22.668L14.5689 22.5295H14.5228L14.4766 22.4371L12.2375 20.198L12.0759 20.0133L11.7296 19.6671L11.5449 19.5055L10.6216 18.5821L10.4369 18.4205L10.3215 18.259L10.3446 18.2359L10.8986 18.2128L25.6723 18.1897L26.3648 18.1666L26.5725 18.0974L26.7111 17.982L26.8496 17.705L26.8726 17.5895V17.3356L26.8034 17.0586L26.688 16.8508L26.5725 16.7816L26.411 16.7585L25.88 16.7354L23.4793 16.7123H11.4757L10.3677 16.6893L10.2984 16.6662L10.46 16.4815L10.6447 16.3199L10.9909 15.9967L11.5219 15.4658L11.6834 15.2811L12.4914 14.4732V14.427L12.5837 14.3809L14.5689 12.3957L14.7305 12.211L14.9383 11.9801L15.0768 11.7493L15.0999 11.6801V11.4492L15.0075 11.2184L14.869 11.0337L14.7074 10.8952L14.5458 10.826L14.3612 10.8029Z" fill="#DE1587"/>
</svg>
  </div>
);

const NextArrow = ({ onClick }) => (
  <div
    className="absolute top-1/2 -right-10 transform -translate-y-1/2 w-12 h-12 flex items-center justify-center cursor-pointer z-10"
    onClick={onClick}
  >
   <svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M18.7462 36.376H18.1337L17.4232 36.3515L16.4677 36.278L15.5122 36.1555L14.6057 35.984L13.9687 35.837L13.1357 35.592L12.2047 35.2735L11.3472 34.9305L10.6612 34.612L10.2692 34.416L9.6567 34.0975L8.7747 33.5585L8.4072 33.3135L8.0642 33.0685L7.5987 32.7255L7.2557 32.456L6.8637 32.1375L6.6187 31.917L6.3492 31.6965L6.0062 31.3535L5.8347 31.2065V31.1575L5.7367 31.1085V31.0595L5.6387 31.0105V30.9615L5.5407 30.9125L5.3692 30.7165L5.1487 30.496L4.9772 30.3L4.6832 29.957L4.4137 29.6385L4.1932 29.3445L3.5562 28.4625L3.2867 28.046L2.8702 27.36L2.4782 26.6495L2.2087 26.1105L1.8657 25.3265L1.5227 24.4445L1.2532 23.636L0.9837 22.656L0.787701 21.7005L0.640701 20.843L0.542702 19.961L0.493702 19.324V17.511L0.5672 16.4575L0.689701 15.5265L0.8857 14.522L1.0817 13.689L1.3022 12.9295L1.5472 12.1945L1.8412 11.4595L2.2332 10.5775L2.6497 9.74448L2.9927 9.15648L3.2622 8.71548L3.8012 7.90698L4.1197 7.46598L4.4382 7.07398L4.6587 6.80448L4.9282 6.48598L5.1977 6.19198L5.3692 5.99598L5.4672 5.87348H5.5162L5.5652 5.77548H5.6142L5.6632 5.67748L5.9327 5.40798L6.1287 5.23648L6.3247 5.04048L6.5942 4.81998L6.8637 4.57498L7.2067 4.30548L7.6477 3.96248L8.1132 3.61948L8.5542 3.32548L9.1422 2.95798L9.7792 2.59048L10.4407 2.24748L10.9797 1.97798L11.7392 1.65948L12.8172 1.26748L13.6992 0.997978L14.3852 0.826477L15.3897 0.630478L16.3942 0.483479L17.2027 0.409977L18.0112 0.360977H19.1872L20.2407 0.434479L21.1227 0.532478L21.9802 0.679478L23.0337 0.924477L23.7197 1.12048L24.6997 1.43898L25.5572 1.78198L26.3657 2.14948L26.8312 2.39448L27.2232 2.59048L27.7132 2.88448L28.2767 3.22748L28.6687 3.49698L29.5997 4.18298L29.8692 4.40348L30.2122 4.69748L30.8002 5.23648L31.0207 5.45698L31.2167 5.62848L31.2412 5.70198H31.2902L31.4617 5.89798L31.7067 6.14298L31.8782 6.33898L32.2457 6.73098L32.4662 7.00048L32.7112 7.29448L33.0787 7.78448L33.3972 8.22548L33.6667 8.64198L34.0587 9.27898L34.2792 9.67098L34.5487 10.161L34.8182 10.7245L35.0387 11.2145L35.2837 11.8025L35.6512 12.8315L35.8472 13.493L36.0677 14.3505L36.2147 15.0365L36.3617 15.943L36.4597 16.7515L36.5087 17.462L36.5332 18.0745V18.6135L36.4842 19.6425L36.3862 20.5735L36.2392 21.5045L36.0677 22.362L35.8227 23.3175L35.5287 24.2485L35.1612 25.2285L34.8672 25.89L34.3527 26.919L34.1322 27.311L33.8382 27.801L33.5932 28.193L33.3727 28.5115L33.1032 28.9035L32.8092 29.271L32.5152 29.663L32.3192 29.908L32.0252 30.251L31.7312 30.5695L31.5597 30.7655L31.2657 31.084L30.9472 31.4025L30.7512 31.574L30.3592 31.9415L30.0897 32.162L29.7712 32.4315L29.5017 32.6275L28.9872 33.0195L28.6687 33.24L28.3012 33.485L27.9582 33.7055L27.5907 33.926L27.0762 34.22L26.5127 34.514L25.7042 34.906L24.8467 35.249L24.3077 35.445L23.5972 35.6655L22.6662 35.9105L21.7107 36.1065L20.7797 36.2535L19.9222 36.327L18.7462 36.376ZM21.6372 25.4245L21.8822 25.351L22.1027 25.204L22.4457 24.91L22.9357 24.42L23.3522 24.028L28.1787 19.2015L28.3502 19.0055L28.5707 18.7115L28.6687 18.491L28.6932 18.3195L28.5952 18.0745L28.3012 17.6825L27.9582 17.315L24.4547 13.8115L24.1362 13.4685H24.0872L24.0627 13.395L23.9402 13.2725H23.8912L23.8422 13.1745L22.9602 12.2925L22.7642 12.121L22.4702 11.827L22.2742 11.6555L21.9067 11.386L21.6862 11.3125H21.4412L21.1717 11.5085L20.9757 11.7045L20.8532 11.9005L20.8287 12.121L20.9267 12.366L21.0737 12.5865L21.2942 12.8315L21.4167 12.9785H21.4657L21.5147 13.0765L23.8912 15.453L24.0627 15.649L24.4302 16.0165L24.6262 16.188L25.6062 17.168L25.8022 17.3395L25.9247 17.511L25.9002 17.5355L25.3122 17.56L9.6322 17.5845L8.8972 17.609L8.6767 17.6825L8.5297 17.805L8.3827 18.099L8.3582 18.2215V18.491L8.4317 18.785L8.5542 19.0055L8.6767 19.079L8.8482 19.1035L9.4117 19.128L11.9597 19.1525H24.6997L25.8757 19.177L25.9492 19.2015L25.7777 19.3975L25.5817 19.569L25.2142 19.912L24.6507 20.4755L24.4792 20.6715L23.6217 21.529V21.578L23.5237 21.627L21.4167 23.734L21.2452 23.93L21.0247 24.175L20.8777 24.42L20.8532 24.4935V24.7385L20.9512 24.9835L21.0982 25.1795L21.2697 25.3265L21.4412 25.4L21.6372 25.4245Z" fill="#DE1587"/>
</svg>
  </div>
);

const DestinationStayCarousel = ({ stays = [], destinationFolder }) => {
  const settings = {
    dots: stays.length > 1,
    infinite: stays.length > 1,
    speed: 500,
    slidesToShow: stays.length === 1 ? 1 : 2,
    slidesToScroll: 1,
    nextArrow: <NextArrow />,
    prevArrow: <PrevArrow />,
    responsive: [
      {
        breakpoint: 1024,
        settings: {
          slidesToShow: 2,
        },
      },
      {
        breakpoint: 768,
        settings: {
          slidesToShow: 1,
        },
      },
    ],
  };

  const renderStayCard = (stay) => (
    <div key={stay.id} className="px-4">
      <Link to={`/Stays/${stay.id}`}>
        <div className="relative w-full h-[450px] bg-gray-100 overflow-hidden shadow-lg">
          <S3Image
            folder={destinationFolder}
            imageName={stay.image}
            alt={stay.name}
            className="w-full h-full object-cover"
          />
          <div className="absolute bottom-0 left-0 w-full bg-white px-6 py-4">
            <p className="text-gray-500 text-xs">
              {stay.category ? stay.category.join(", ") : "No category available"}
            </p>
            <div className="flex justify-between items-center">
              <h3 className="text-xl font-bold text-gray-900">{stay.name}</h3>
              <div className="text-right">
                <span className="font-sans text-2xl text-black font-semibold">â‚¹{stay.price}</span>
                <p className="text-sm font-[400] font-poppins">per night.</p>
              </div>
            </div>
          </div>
        </div>
      </Link>
    </div>
  );

  return (
    <div className="mt-16 px-4 lg:px-[220px]">
      <HeadingSection text="Hand-picked for you" color="black" />
      <Title>Stay & make memories</Title>
      <div className="relative mt-8 px-8">
        {stays.length > 0 ? (
          <Slider {...settings}>
            {stays.map((stay) => renderStayCard(stay))}
          </Slider>
        ) : (
          <p className="text-center text-gray-600">No available stays.</p>
        )}
      </div>
    </div>
  );
};

export default DestinationStayCarousel;
